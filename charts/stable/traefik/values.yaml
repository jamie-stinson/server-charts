image:
  registry: "docker.io"
  repository: "traefik"
  tag: "v2.10.7"

service:
  enabled: true
  clusterip:
    - name: dashboard
      protocol: TCP
      port: 8080
  nodeport:
    - name: http
      protocol: TCP
      port: 80
      nodePort: 30080
    - name: https
      protocol: TCP
      port: 443
      nodePort: 30443

serviceAccount:
  enabled: true

traefik:
  accessLogFormat: "json"
  logFormat: "json"
  logLevel: "info"
  entrypoints:
    - name: web
      port: 80
    - name: websecure
      port: 443
  certificateIssuer:
    enabled: true
    name: "letsencrypt-production"
    email: "contact@projectwhitebox.com"
    solvers:
      dns:
        enabled: true
        provider: njalla
        email: "contact@projectwhitebox.com"
        dnsZones:
          - "*.projectwhitebox.com"

ingress:
  traefik:
    enabled: true
    hosts:
    - name: https
      entrypoint: "websecure"
      host: "traefik.projectwhitebox.com"
      backendPort: 8080
      middlewares: []
      tls: true
    - name: http
      entrypoint: "web"
      host: "traefik.projectwhitebox.com"
      backendPort: 80
      middlewares: []
      tls: true

serviceAccount:
  enabled: true

rbac:
  enabled: true
  type: clusterrole
  rules:
    - apiGroups:
        - ""
      resources:
        - services
        - endpoints
        - secrets
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - extensions
        - networking.k8s.io
      resources:
        - ingresses
        - ingressclasses
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - extensions
        - networking.k8s.io
      resources:
        - ingresses/status
      verbs:
        - update